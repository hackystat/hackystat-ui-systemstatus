<project name="jar" default="jar">
  <description>
  Provides the target for building system status jar files.
  </description>

  <import file="build.xml"/>
  <property name="tmp.dir" location="${basedir}/tmp" />
  
  <target name="jar" depends="jar-pingmail" description="Create all system status jar files." />
 
  <target name="jar-pingmail" depends="compile"  description="Create pingmail.jar.">

     <mkdir dir="${tmp.dir}" />
     <copy todir="${tmp.dir}">
       <fileset dir="${basedir}/build/classes/">
          <include name="org/hackystat/systemstatus/pingmail/**"/>
       </fileset>
     </copy>
     <unjar src="${env.HACKYSTAT_SENSORBASE_HOME}/sensorbaseclient.jar" dest="${tmp.dir}"/>
   
     <jar destfile="${basedir}/pingmail.jar" basedir="${tmp.dir}">
       <manifest>
         <attribute name="Main-Class" value="org.hackystat.systemstatus.pingmail.PingMail"/>
         <attribute name="Implementation-Title" value="PingMail"/>
         <attribute name="Implementation-Version" value="${version}"/>
         <attribute name="Implementation-Vendor" value="Collaborative Software Development Laboratory, University of Hawaii"/>
       </manifest>
     </jar>
     <delete dir="${tmp.dir}" />
   </target>  
</project>

